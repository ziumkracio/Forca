<!DOCTYPE html>

<html lang="pt">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Jogo da Forca</title>
<style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(to bottom, #aee1f9, #ffffff);
      margin: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      min-height: 100vh;
      padding: 20px;
    }
    h1 {
      color: #2c3e50;
      margin-bottom: 10px;
    }
    #categoriaEscolha {
      margin-bottom: 20px;
    }
    select {
      font-size: 1rem;
      padding: 8px;
      border-radius: 6px;
      border: 1px solid #ccc;
    }
    #forcaCanvas {
      margin: 20px;
    }
    #palavra {
  font-size: 2rem;
  margin-bottom: 20px;
  color: #34495e;
  text-align: center;
  word-break: break-word;
  white-space: normal;
}
    #letras {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      max-width: 350px;
      gap: 8px;
    }
    .letra {
      background-color: #3498db;
      border: none;
      color: white;
      padding: 12px;
      font-size: 1.2rem;
      border-radius: 8px;
      width: 40px;
      text-align: center;
      cursor: pointer;
    }
    

      background-color: #3498db;
      border: none;
      color: white;
      padding: 12px;
      font-size: 1.2rem;
      border-radius: 8px;
      width: 40px;
      text-align: center;
      cursor: pointer;
    }
    .letra:disabled {
      background-color: #bdc3c7;
      cursor: not-allowed;
    }
    #mensagem {
      font-size: 1.4rem;
      font-weight: bold;
      color: #e74c3c;
      margin-top: 20px;
    }
    @media (max-width: 600px) {
      #palavra {
  font-size: 2rem;
  margin-bottom: 20px;
  color: #34495e;
  text-align: center;
  word-break: break-word;
  white-space: normal;
}
      .letra {
      background-color: #3498db;
      border: none;
      color: white;
      padding: 12px;
      font-size: 1.2rem;
      border-radius: 8px;
      width: 40px;
      text-align: center;
      cursor: pointer;
    }
    

        padding: 10px;
        font-size: 1rem;
        width: 35px;
      }
    }
  
    .acerto {
      background-color: #2ecc71 !important;
      color: white;
    }
    .erro {
      background-color: #e74c3c !important;
      color: white;
    }


    .pontuacao-flutuante {
      position: fixed;
      left: 50%;
      top: 50%;
      transform: translate(-50%, -50%);
      font-size: 3rem;
      font-weight: bold;
      color: green;
      background: white;
      padding: 10px;
      border: 2px solid black;
      z-index: 99999;
      animation: subir 1s ease-out forwards;
    }
    @keyframes subir {
      0% { opacity: 1; }
      100% { opacity: 0; transform: translate(-50%, -100%); }
    }


    #categoriaEscolha {
  text-align: center;
}

#categoriaEscolha button {
      background: linear-gradient(145deg, #f1c40f, #f39c12);
      border: 2px solid #000;
      color: #000;
      font-weight: bold;
      padding: 10px 20px;
      font-size: 1.1rem;
      border-radius: 10px;
      cursor: pointer;
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }
    #categoriaEscolha button:hover {
      transform: scale(1.05);
      box-shadow: 0 4px 15px rgba(0,0,0,0.3);
    }


.popup {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0,0,0,0.6);
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 999;
}
.popup-content {
  background: white;
  padding: 30px;
  border-radius: 12px;
  text-align: center;
  box-shadow: 0 0 20px rgba(0,0,0,0.3);
}
.hidden {
  display: none;
}

</style>
<link href="/Forca/manifest.json" rel="manifest"/>
<meta content="#3498db" name="theme-color"/>
<style>
  .botao-amarelo {
    background: linear-gradient(to bottom, #f9d423, #f39c12);
    border: 2px solid black;
    border-radius: 12px;
    padding: 10px 20px;
    font-size: 1.2rem;
    font-weight: bold;
    color: black;
    cursor: pointer;
  }

  .botao-amarelo:hover {
    background: linear-gradient(to bottom, #f39c12, #f9d423);
  }
</style>
</head>
<body>
<audio id="somAcerto" src="arcade-game-collect-point-epic-stock-media-1-00-00.mp3"></audio>
<audio id="somErro" src="error-warning-login-denied-132113 (2).mp3"></audio>
<audio id="somDerrota" src="game-over-arcade-6435.mp3"></audio>
<audio id="somVitoria" src="game-level-complete-143022.mp3"></audio>
<h1>Jogo da Forca</h1>
<div id="categoriaEscolha">
<label for="categoria">Escolhe uma categoria: </label>
<select id="categoria">
<option value="">-- Escolher --</option>
<option value="ditados">Ditados ðŸŸ¢</option>
<option value="gastronomia">Gastronomia ðŸŸ¢</option>
<option value="marcas">Marcas ðŸŸ¢</option>
<option value="celebridades">Celebridades ðŸŸ¢</option>
<option value="filmes">Cinema ðŸŸ¢</option>
<option value="animais">Animais ðŸŸ¢</option>
<option value="profissoes">ProfissÃµes ðŸŸ¢</option>
</select>
<button class="botao-amarelo" id="btnIniciar" onclick="iniciarJogo()">ComeÃ§ar</button>
</div>
<canvas height="250" id="forcaCanvas" width="200"></canvas>
<div id="barraContainer" style="width: 100%; height: 20px; background-color: #ccc; margin-bottom: 10px; border-radius: 5px;">
<div id="barraTempo" style="height: 100%; width: 100%; background-color: #4caf50; border-radius: 5px;"></div>
</div>
<div id="palavra"></div>
<div id="letras"></div>
<div id="pontuacao">PontuaÃ§Ã£o: 0</div>
<div id="mensagem"></div>
<div id="cronometro" style="margin-top: 10px; font-size: 1.5rem; font-weight: bold;">
    Tempo restante: <span id="tempoRestante">0</span>s
  </div>
<div class="popup hidden" id="continuarJogo">
<div class="popup-content">
<p style="color: green; font-size: 1.4rem; font-weight: bold;">ParabÃ©ns! Venceste!</p>
<p>Queres continuar?</p>
<button class="botao-amarelo" id="btnSim">Sim</button>
<button class="botao-amarelo" id="btnNao">NÃ£o</button>
<div id="popupNovaCategoria" style="display: none; margin-top: 15px;">
<p>Escolhe uma categoria:</p>
<select id="popupCategoria" style="margin-bottom: 10px;"><option value="">-- Escolher --</option><option value="ditados">Ditados ðŸŸ¢</option><option value="gastronomia">Gastronomia ðŸŸ¢</option><option value="marcas">Marcas ðŸŸ¢</option><option value="celebridades">Celebridades ðŸŸ¢</option><option value="filmes">Filmes ðŸŸ¢</option><option value="animais">Animais ðŸŸ¢</option><option value="profissoes">ProfissÃµes ðŸŸ¢</option></select>
<br/>
<button class="botao-amarelo" id="btnComecarPopup">ComeÃ§ar</button>
</div>
</div>
</div>
<audio id="somAcerto" src="https://www.soundjay.com/button/beep-07.wav"></audio>
<audio id="somErro" src="https://www.soundjay.com/button/beep-10.wav"></audio>
<script>
    const categorias = {
  "ditados": [
    "GrÃ£o a grÃ£o enche a galinha o papo",
    "Devagar se chega ao longe",
    "NÃ£o hÃ¡ fome que nÃ£o dÃª em fartura",
    "Casa de ferreiro espeto de pau",
    "No melhor pano cai a nodoa",
    "O ultimo a rir ri melhor",
    "Ãgua mole em pedra dura tanto dÃ¡ atÃ© que fura",
    "Em terra de cegos quem tem olho Ã© rei",
    "Quem nÃ£o tem cÃ£o caÃ§a com gato",
    "Cada macaco no seu galho",
    "Diz-me com quem andas, dir-te-ei quem Ã©s",
    "Quem conta um conto, acrescenta-lhe um ponto",
    "A cavalo dado, nÃ£o se olham os dentes",
    "Quem nÃ£o arrisca nÃ£o petisca",
    "Cada macaco no seu galho"
  ],
  "gastronomia": [
    "Bacalhau Ã¡ BrÃ¡s",
    "Cozido Ã¡ portuguesa",
    "Carne de porco Ã¡ alentejana",
    "Caldo verde",
    "Feijoada de choco",
    "Bacalhau Ã¡ gomes SÃ¡",
    "Frango assado",
    "Tripas Ã¡ moda do porto",
    "Dobrada",
    "Esparguete Ã¡ bolonhesa",
    "EmpadÃ£o de atum",
    "Arroz de pato",
    "Polvo Ã¡ lagareiro",
    "Arroz de marisco",
    "Sardinhas assadas"
  ],
  "marcas": [
    "Toyota",
    "Coca cola",
    "Google",
    "Ford",
    "NestlÃ©",
    "Visa",
    "Mastercard",
    "Gillette",
    "Sumsung",
    "Oracle",
    "Gucci",
    "Rolex",
    "Dior",
    "Chanel",
    "Volkswagen"
  ],
  "celebridades": [
    "Herman JosÃ©",
    "Dulce Pontes",
    "Rui de Carvalho",
    "Rui Veloso",
    "Amalia Rodrigues",
    "Freddie Mercury",
    "Bob Marley",
    "Cristiano Ronaldo",
    "Lewis Hamilton",
    "Harrison Ford",
    "Tom cruise",
    "Michael Jackson",
    "Leonardo DiCaprio",
    "Madona",
    "Tina Turner"
  ],
  "filmes": [
    "O Padrinho",
    "A Vida Ã© Bela",
    "O Senhor dos AnÃ©is",
    "Regresso ao Futuro",
    "Os Condenados de Shawshank",
    "O Rei LeÃ£o",
    "Titanic",
    "A Lista de Schindler",
    "O Lobo de Wall Street",
    "O CÃ³digo Da Vinci",
    "Um Sonho de Liberdade",
    "Harry Potter e a Pedra Filosofal",
    "A Origem",
    "Os Vingadores",
    "O Diabo Veste Prada"
  ],
  "animais": [
    "Rinoceronte",
    "Morcego",
    "Cavalo-marinho",
    "Esquilo",
    "Lobo",
    "Polvo",
    "CamaleÃ£o",
    "Coruja",
    "Ornitorrinco",
    "Golfinho",
    "PavÃ£o",
    "FaisÃ£o",
    "Rouxinol",
    "Pirilampo",
    "Papagaio"
  ],
  "profissoes": [
    "Carpinteiro",
    "Enfermeira",
    "Bombeiro",
    "Cabeleireira",
    "Electricista",
    "Engenheiro",
    "Professor",
    "Padeiro",
    "Agricultor",
    "ArqueÃ³logo",
    "Policia",
    "Medico",
    "Motorista",
    "Pedreiro",
    "Canalizador"
  ]
};
// CÃ³pia dinÃ¢mica para evitar repetiÃ§Ã£o
const categoriasDisponiveis = JSON.parse(JSON.stringify(categorias));

    let palavra = '';
    let estado = [];
    let erros = 0;
    let letrasUsadas = [];
    const maxErros = 6;
    const canvas = document.getElementById('forcaCanvas');
    const ctx = canvas.getContext('2d');
    const palavraDisplay = document.getElementById('palavra');
    const letrasContainer = document.getElementById('letras');
    const mensagem = document.getElementById('mensagem');
    const somAcerto = document.getElementById('somAcerto');
    const somErro = document.getElementById('somErro');
    let pontuacao = 0;
    const pontuacaoDisplay = document.getElementById('pontuacao');
    
    function mostrarPontuacaoFlutuante(texto, cor) {
      const span = document.createElement('span');
      span.className = 'pontuacao-flutuante';
      span.style.color = cor;
      span.textContent = texto;
      document.body.appendChild(span);
      setTimeout(() => span.remove(), 1000);
    }

    function atualizarPontuacao(valor) {
      pontuacao += valor;
      pontuacaoDisplay.textContent = 'PontuaÃ§Ã£o: ' + pontuacao;
    }

    function iniciarJogo() {
  const categoriaSelecionada = document.getElementById('categoria').value;
  if (!categoriaSelecionada || categorias[categoriaSelecionada].length === 0) {
    alert('Escolhe uma categoria vÃ¡lida com frases disponÃ­veis.');
    return;
  }

  // SÃ³ inicializar uma vez
  if (!categoriasDisponiveis[categoriaSelecionada]) {
    if (!categoriasDisponiveis[categoriaSelecionada]) { categoriasDisponiveis[categoriaSelecionada] = [...categorias[categoriaSelecionada]]; }
  }

  let frases = categoriasDisponiveis[categoriaSelecionada];
  
  if (frases.length === 0) {
    if (!categoriasDisponiveis[categoriaSelecionada]) { categoriasDisponiveis[categoriaSelecionada] = [...categorias[categoriaSelecionada]]; }
    frases = categoriasDisponiveis[categoriaSelecionada];
  }
      if (frases.length === 0) {
        // Reset se todas foram usadas
        if (!categoriasDisponiveis[categoriaSelecionada]) { categoriasDisponiveis[categoriaSelecionada] = [...categorias[categoriaSelecionada]]; }
        frases = categoriasDisponiveis[categoriaSelecionada];
      }
      const indice = Math.floor(Math.random() * frases.length);
      palavra = frases.splice(indice, 1)[0].toUpperCase();
      iniciarCronometro(palavra.replace(/\s/g, '').length * 15);
      iniciarCronometro(palavra.replace(/\s/g, '').length * 15);
estado = palavra.split('').map(c => /[A-ZÃÃ€Ã‚ÃƒÃ‰ÃŠÃÃ“Ã”Ã•ÃšÃ‡]/.test(c) ? '_' : c);
      erros = 0;
      letrasUsadas = [];
      palavraDisplay.innerHTML = estado.join('');
      letrasContainer.innerHTML = '';
      mensagem.textContent = '';
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      // pontuaÃ§Ã£o mantida
      desenharForca();
      criarBotoes();
    }
    function desenharForca() {
      ctx.lineWidth = 2;
      ctx.strokeStyle = '#000';
      ctx.beginPath();
      ctx.moveTo(10, 240);
      ctx.lineTo(190, 240);
      ctx.moveTo(50, 240);
      ctx.lineTo(50, 20);
      ctx.lineTo(130, 20);
      ctx.lineTo(130, 40);
      ctx.stroke();
      if (erros > 0) {
      const emojis = ["ðŸ™‚", "ðŸ˜", "ðŸ˜Ÿ", "ðŸ˜¨", "ðŸ˜±", "ðŸ˜µ", "ðŸ’€"];
      const emoji = emojis[Math.min(erros, emojis.length - 1)];
      ctx.font = '24px Segoe UI Emoji';
      ctx.textAlign = 'center';
      ctx.fillText(emoji, 130, 68);
    
        ctx.stroke();
      }
      if (erros > 1) {
        ctx.beginPath();
        ctx.moveTo(130, 80);
        ctx.lineTo(130, 140);
        ctx.stroke();
      }
      if (erros > 2) {
        ctx.beginPath();
        ctx.moveTo(130, 100);
        ctx.lineTo(100, 120);
        ctx.stroke();
      }
      if (erros > 3) {
        ctx.beginPath();
        ctx.moveTo(130, 100);
        ctx.lineTo(160, 120);
        ctx.stroke();
      }
      if (erros > 4) {
        ctx.beginPath();
        ctx.moveTo(130, 140);
        ctx.lineTo(100, 180);
        ctx.stroke();
      }
      if (erros > 5) {
        ctx.beginPath();
        ctx.moveTo(130, 140);
        ctx.lineTo(160, 180);
        ctx.stroke();
      }
    }
    function mostrarMensagem(texto, cor) {
      mensagem.textContent = texto;
      mensagem.style.color = cor;
    }
    function verificarLetra(letra) {
      if (letrasUsadas.includes(letra)) return;
      letrasUsadas.push(letra);
      const botao = document.getElementById('btn-' + letra);
      botao.disabled = true;
      if (palavra.includes(letra)) {
        somAcerto.play();
        atualizarPontuacao(1);
        mostrarPontuacaoFlutuante('+1', 'green');
        botao.classList.add('acerto');
        botao.style.backgroundColor = '#2ecc71';
        botao.style.color = 'white';
        for (let i = 0; i < palavra.length; i++) {
          if (palavra[i] === letra) estado[i] = letra;
        }
        palavraDisplay.innerHTML = estado.join('');
        
        if (!estado.includes('_')) {
          mostrarMensagem('Parabens! Venceste!', 'green');
          clearInterval(intervalo);
          desativarBotoes();

          // Reset visual do popup de continuar
          const continuarJogo = document.getElementById('continuarJogo');
          const popupNovaCategoria = document.getElementById('popupNovaCategoria');
          const btnSim = document.getElementById('btnSim');
          const btnNao = document.getElementById('btnNao');
          const btnComecarPopup = document.getElementById('btnComecarPopup');

          continuarJogo.classList.remove('hidden');
          popupNovaCategoria.style.display = 'none';
          btnSim.style.display = 'inline-block';
          btnNao.style.display = 'inline-block';
          btnComecarPopup.style.display = 'none';
        }

      } else {
        somErro.play();
        atualizarPontuacao(-1);
        mostrarPontuacaoFlutuante('-1', 'red');
        botao.classList.add('erro');
        erros++;
        tempo = Math.max(0, tempo - 1);
        desenharForca();
        if (erros >= maxErros) {
          clearInterval(intervalo);
          document.getElementById('barraTempo').style.width = '0%';
          document.getElementById('barraTempo').style.backgroundColor = '#f44336';
          mostrarPopupDerrota(palavra);
          desativarBotoes();
          document.getElementById('guardarPontuacao').style.display = 'block';
          document.getElementById('btnIniciar').textContent = 'ComeÃ§ar';
          document.getElementById('categoria').value = '';
          // pontuaÃ§Ã£o serÃ¡ reiniciada apÃ³s guardar
        }
      }
    }
    
    function desativarBotoes() {
      const botoes = document.querySelectorAll('.letra');
      botoes.forEach(btn => btn.disabled = true);
    }

    function criarBotoes() {
      for (let i = 65; i <= 90; i++) {
        const letra = String.fromCharCode(i);
        const btn = document.createElement('button');
        btn.textContent = letra;
        btn.className = 'letra';
        btn.id = 'btn-' + letra;
        btn.onclick = () => verificarLetra(letra);
        letrasContainer.appendChild(btn);
      }
      const btn_Ã = document.createElement('button');
      btn_Ã.textContent = 'Ã';
      btn_Ã.className = 'letra';
      btn_Ã.id = 'btn-Ã';
      btn_Ã.onclick = () => verificarLetra('Ã');
      letrasContainer.appendChild(btn_Ã);
      const btn_Ã€ = document.createElement('button');
      btn_Ã€.textContent = 'Ã€';
      btn_Ã€.className = 'letra';
      btn_Ã€.id = 'btn-Ã€';
      btn_Ã€.onclick = () => verificarLetra('Ã€');
      letrasContainer.appendChild(btn_Ã€);
      const btn_Ã‚ = document.createElement('button');
      btn_Ã‚.textContent = 'Ã‚';
      btn_Ã‚.className = 'letra';
      btn_Ã‚.id = 'btn-Ã‚';
      btn_Ã‚.onclick = () => verificarLetra('Ã‚');
      letrasContainer.appendChild(btn_Ã‚);
      const btn_Ãƒ = document.createElement('button');
      btn_Ãƒ.textContent = 'Ãƒ';
      btn_Ãƒ.className = 'letra';
      btn_Ãƒ.id = 'btn-Ãƒ';
      btn_Ãƒ.onclick = () => verificarLetra('Ãƒ');
      letrasContainer.appendChild(btn_Ãƒ);
      const btn_Ã‰ = document.createElement('button');
      btn_Ã‰.textContent = 'Ã‰';
      btn_Ã‰.className = 'letra';
      btn_Ã‰.id = 'btn-Ã‰';
      btn_Ã‰.onclick = () => verificarLetra('Ã‰');
      letrasContainer.appendChild(btn_Ã‰);
      const btn_ÃŠ = document.createElement('button');
      btn_ÃŠ.textContent = 'ÃŠ';
      btn_ÃŠ.className = 'letra';
      btn_ÃŠ.id = 'btn-ÃŠ';
      btn_ÃŠ.onclick = () => verificarLetra('ÃŠ');
      letrasContainer.appendChild(btn_ÃŠ);
      const btn_Ã = document.createElement('button');
      btn_Ã.textContent = 'Ã';
      btn_Ã.className = 'letra';
      btn_Ã.id = 'btn-Ã';
      btn_Ã.onclick = () => verificarLetra('Ã');
      letrasContainer.appendChild(btn_Ã);
      const btn_Ã“ = document.createElement('button');
      btn_Ã“.textContent = 'Ã“';
      btn_Ã“.className = 'letra';
      btn_Ã“.id = 'btn-Ã“';
      btn_Ã“.onclick = () => verificarLetra('Ã“');
      letrasContainer.appendChild(btn_Ã“);
      const btn_Ã” = document.createElement('button');
      btn_Ã”.textContent = 'Ã”';
      btn_Ã”.className = 'letra';
      btn_Ã”.id = 'btn-Ã”';
      btn_Ã”.onclick = () => verificarLetra('Ã”');
      letrasContainer.appendChild(btn_Ã”);
      const btn_Ã• = document.createElement('button');
      btn_Ã•.textContent = 'Ã•';
      btn_Ã•.className = 'letra';
      btn_Ã•.id = 'btn-Ã•';
      btn_Ã•.onclick = () => verificarLetra('Ã•');
      letrasContainer.appendChild(btn_Ã•);
      const btn_Ãš = document.createElement('button');
      btn_Ãš.textContent = 'Ãš';
      btn_Ãš.className = 'letra';
      btn_Ãš.id = 'btn-Ãš';
      btn_Ãš.onclick = () => verificarLetra('Ãš');
      letrasContainer.appendChild(btn_Ãš);
      const btn_Ã‡ = document.createElement('button');
      btn_Ã‡.textContent = 'Ã‡';
      btn_Ã‡.className = 'letra';
      btn_Ã‡.id = 'btn-Ã‡';
      btn_Ã‡.onclick = () => verificarLetra('Ã‡');
      letrasContainer.appendChild(btn_Ã‡);

    }
  
    document.getElementById('btnSim').onclick = () => {
  alert("Escolhe uma categoria e continua.");
      document.getElementById('continuarJogo').classList.add('hidden');
      document.getElementById('categoria').value = "";
      document.getElementById('categoriaEscolha').style.display = 'block';
      document.getElementById('btnIniciar').textContent = 'Continuar';
    };

    document.getElementById('btnNao').onclick = () => {
  document.getElementById('mensagemDerrota').textContent = 'Insere o teu nome para guardar a pontuaÃ§Ã£o:';
  document.getElementById('continuarJogo').classList.add('hidden');
  document.getElementById('popupDerrota').classList.remove('hidden');
  window.scrollTo(0, 0);
};

    function guardarPontuacao() {
      const nome = document.getElementById('nomeJogador').value.trim();
      if (nome === "") {
        alert("Por favor, escreve o teu nome para guardar a pontuaÃ§Ã£o.");
        return;
      }
      alert(`PontuaÃ§Ã£o de ${nome} guardada com ${pontuacao} pontos!`);
      document.getElementById('guardarPontuacao').style.display = 'none';
      pontuacao = 0;
      atualizarPontuacao(0);
      document.getElementById('btnIniciar').textContent = 'ComeÃ§ar';
      document.getElementById('categoria').value = '';
    }


    function guardarPontuacao() {
      const nome = document.getElementById('nomeJogador').value.trim();
      if (nome === "") {
        alert("Por favor, escreve o teu nome para guardar a pontuaÃ§Ã£o.");
        return;
      }

      const novaPontuacao = { nome: nome, pontos: pontuacao, data: new Date().toLocaleString() };
      let ranking = JSON.parse(localStorage.getItem('rankingForca')) || [];

      ranking.push(novaPontuacao);
      ranking.sort((a, b) => b.pontos - a.pontos);
      ranking = ranking.slice(0, 10); // Manter top 10
      localStorage.setItem('rankingForca', JSON.stringify(ranking));

      mostrarRanking();
      alert(`PontuaÃ§Ã£o de ${nome} guardada com ${pontuacao} pontos!`);
      document.getElementById('guardarPontuacao').style.display = 'none';
      pontuacao = 0;
      atualizarPontuacao(0);
      document.getElementById('btnIniciar').textContent = 'ComeÃ§ar';
      document.getElementById('categoria').value = '';
    }

    function mostrarRanking() {
      const lista = document.getElementById('listaRanking');
      const ranking = JSON.parse(localStorage.getItem('rankingForca')) || [];
      lista.innerHTML = "";
      ranking.forEach((jogador, i) => {
        const li = document.createElement('li');
        li.textContent = `${jogador.nome} - ${jogador.pontos} pontos`;
        lista.appendChild(li);
      });
    }

    window.onload = mostrarRanking;


    function guardarPontuacao() {
      const nome = document.getElementById('nomeJogador').value.trim();
      if (nome === "") {
        alert("Por favor, escreve o teu nome para guardar a pontuaÃ§Ã£o.");
        return;
      }

      const novaPontuacao = {
        nome: nome,
        pontos: pontuacao,
        data: new Date().toLocaleString()
      };

      let ranking = JSON.parse(localStorage.getItem('rankingForca')) || [];
      ranking.push(novaPontuacao);
      ranking.sort((a, b) => b.pontos - a.pontos);
      ranking = ranking.slice(0, 10);
      localStorage.setItem('rankingForca', JSON.stringify(ranking));

      mostrarRanking();
      alert(`PontuaÃ§Ã£o de ${nome} guardada com ${pontuacao} pontos!`);
      document.getElementById('guardarPontuacao').style.display = 'none';
      pontuacao = 0;
      atualizarPontuacao(0);
      document.getElementById('btnIniciar').textContent = 'ComeÃ§ar';
      document.getElementById('categoria').value = '';
    }

    function mostrarRanking() {
      const lista = document.getElementById('listaRanking');
      const ranking = JSON.parse(localStorage.getItem('rankingForca')) || [];
      lista.innerHTML = "";
      ranking.forEach((jogador, i) => {
        const li = document.createElement('li');
        let medalha = '';
        if (i === 0) medalha = 'ðŸ¥‡ ';
        else if (i === 1) medalha = 'ðŸ¥ˆ ';
        else if (i === 2) medalha = 'ðŸ¥‰ ';
        li.textContent = `${medalha}${jogador.nome} - ${jogador.pontos} pontos (${jogador.data})`;
        lista.appendChild(li);
      });
    }

    window.onload = mostrarRanking;


    let tempo = 0;
let tempoTotal = 0;
    let intervalo;

    function iniciarCronometro(segundos) {
      clearInterval(intervalo);
      tempoTotal = segundos;
      tempo = segundos;
      atualizarTempo();
      intervalo = setInterval(() => {
        tempo--;
        atualizarTempo();
        if (tempo <= 0) {
          clearInterval(intervalo);
          mostrarMensagem("Tempo esgotado! Perdeste!", "red");
          desativarBotoes();
          document.getElementById('guardarPontuacao').style.display = 'block';
          document.getElementById('btnIniciar').textContent = 'ComeÃ§ar';
          document.getElementById('categoria').value = '';
        }
      }, 1000);
    }

    function atualizarTempo() {
  document.getElementById('tempoRestante').textContent = tempo;
  const percent = (tempo / tempoTotal) * 100;
  const barra = document.getElementById('barraTempo');
  barra.style.width = percent + '%';
  if (percent <= 30) {
    barra.style.backgroundColor = '#f44336';
  } else if (percent <= 60) {
    barra.style.backgroundColor = '#ff9800';
  } else {
    barra.style.backgroundColor = '#4caf50';
  }
}


function mostrarPopupDerrota(frase) {
  document.getElementById('mensagemDerrota').textContent = 'Perdeste! A frase era: ' + frase;
  document.getElementById('popupDerrota').classList.remove('hidden');
  window.scrollTo(0, 0);
}
function fecharPopupDerrota() {
  document.getElementById('popupDerrota').classList.add('hidden');
  const nomeInput = document.getElementById('nomeJogador');
  if (nomeInput) {
    nomeInput.scrollIntoView({ behavior: 'smooth' });
    nomeInput.focus();
  }
}


function guardarPontuacaoPopup() {
  const nome = document.getElementById('nomeJogadorPopup').value.trim();
  if (nome === "") {
    alert("Por favor, escreve o teu nome.");
    return;
  }

  const novaPontuacao = {
    nome: nome,
    pontos: pontuacao,
    data: new Date().toLocaleString()
  };

  let ranking = JSON.parse(localStorage.getItem('rankingForca')) || [];
  ranking.push(novaPontuacao);
  ranking.sort((a, b) => b.pontos - a.pontos);
  ranking = ranking.slice(0, 10);
  localStorage.setItem('rankingForca', JSON.stringify(ranking));

  mostrarRanking();
  document.getElementById('popupDerrota').classList.add('hidden');
  pontuacao = 0;
  atualizarPontuacao(0);
  document.getElementById('btnIniciar').textContent = 'ComeÃ§ar';
  document.getElementById('categoriaEscolha').style.display = 'block';
  window.scrollTo(0, 0);
}




function mostrarPopupVitoria() {
  const popupVitoria = document.getElementById("popupVitoria");
  const btnSim = document.getElementById("btnSim");
  const btnNao = document.getElementById("btnNao");
  const popupNovaCategoria = document.getElementById("popupNovaCategoria");
  const btnComecarPopup = document.getElementById("btnComecarPopup");

  // Mostrar popup
  popupVitoria.classList.remove("hidden");

  // Garantir que a escolha de nova categoria estÃ¡ oculta
  popupNovaCategoria.style.display = "none";
  btnComecarPopup.style.display = "none";

  // Mostrar os botÃµes "Sim" e "NÃ£o"
  btnSim.style.display = "inline-block";
  btnNao.style.display = "inline-block";
}
document.getElementById("btnSim").onclick = () => {
  document.getElementById("btnSim").style.display = "none";
  document.getElementById("btnNao").style.display = "none";
  document.getElementById("popupNovaCategoria").style.display = "block";
  document.getElementById("btnComecarPopup").style.display = "inline-block";
};


document.getElementById("btnComecarPopup").onclick = () => {
  const categoriaSelecionada = document.getElementById("popupCategoria").value;
  if (!categoriaSelecionada) {
    alert("Escolhe uma categoria.");
    return;
  }

  document.getElementById("categoria").value = categoriaSelecionada;
  document.getElementById("continuarJogo").classList.add("hidden");
  document.getElementById("popupVitoria").classList.add("hidden");
  document.getElementById("categoriaEscolha").style.display = "none";
  iniciarJogo();
};

</script>
<div id="ranking" style="margin-top: 50px; width: 100%; max-width: 500px;">
<h2>Top 10 Recordes</h2>
<ol id="listaRanking"></ol>
</div>
<div id="ranking" style="margin-top: 50px; width: 100%; max-width: 500px;">
<h2>Top 10 Recordes</h2>
<ol id="listaRanking"></ol>
</div>
<script>
if ('serviceWorker' in navigator) {
  window.addEventListener('load', () => {
    navigator.serviceWorker.register('/Forca/service-worker.js');
  });
}

function mostrarPopupDerrota(frase) {
  document.getElementById('mensagemDerrota').textContent = 'Perdeste! A frase era: ' + frase;
  document.getElementById('popupDerrota').classList.remove('hidden');
  window.scrollTo(0, 0);
}
function fecharPopupDerrota() {
  document.getElementById('popupDerrota').classList.add('hidden');
  const nomeInput = document.getElementById('nomeJogador');
  if (nomeInput) {
    nomeInput.scrollIntoView({ behavior: 'smooth' });
    nomeInput.focus();
  }
}


function guardarPontuacaoPopup() {
  const nome = document.getElementById('nomeJogadorPopup').value.trim();
  if (nome === "") {
    alert("Por favor, escreve o teu nome.");
    return;
  }

  const novaPontuacao = {
    nome: nome,
    pontos: pontuacao,
    data: new Date().toLocaleString()
  };

  let ranking = JSON.parse(localStorage.getItem('rankingForca')) || [];
  ranking.push(novaPontuacao);
  ranking.sort((a, b) => b.pontos - a.pontos);
  ranking = ranking.slice(0, 10);
  localStorage.setItem('rankingForca', JSON.stringify(ranking));

  mostrarRanking();
  document.getElementById('popupDerrota').classList.add('hidden');
  pontuacao = 0;
  atualizarPontuacao(0);
  document.getElementById('btnIniciar').textContent = 'ComeÃ§ar';
  document.getElementById('categoriaEscolha').style.display = 'block';
  window.scrollTo(0, 0);
}




function mostrarPopupVitoria() {
  const popupVitoria = document.getElementById("popupVitoria");
  const btnSim = document.getElementById("btnSim");
  const btnNao = document.getElementById("btnNao");
  const popupNovaCategoria = document.getElementById("popupNovaCategoria");
  const btnComecarPopup = document.getElementById("btnComecarPopup");

  // Mostrar popup
  popupVitoria.classList.remove("hidden");

  // Garantir que a escolha de nova categoria estÃ¡ oculta
  popupNovaCategoria.style.display = "none";
  btnComecarPopup.style.display = "none";

  // Mostrar os botÃµes "Sim" e "NÃ£o"
  btnSim.style.display = "inline-block";
  btnNao.style.display = "inline-block";
}
document.getElementById("btnSim").onclick = () => {
  document.getElementById("btnSim").style.display = "none";
  document.getElementById("btnNao").style.display = "none";
  document.getElementById("popupNovaCategoria").style.display = "block";
  document.getElementById("btnComecarPopup").style.display = "inline-block";
};


document.getElementById("btnComecarPopup").onclick = () => {
  const categoriaSelecionada = document.getElementById("popupCategoria").value;
  if (!categoriaSelecionada) {
    alert("Escolhe uma categoria.");
    return;
  }

  document.getElementById("categoria").value = categoriaSelecionada;
  document.getElementById("continuarJogo").classList.add("hidden");
  document.getElementById("popupVitoria").classList.add("hidden");
  document.getElementById("categoriaEscolha").style.display = "none";
  iniciarJogo();
};

</script>
<div class="popup hidden" id="popupDerrota">
<div class="popup-content">
<p id="mensagemDerrota" style="color: red; font-size: 1.4rem; font-weight: bold;"></p>
<p>Insere o teu nome para guardar a pontuaÃ§Ã£o:</p>
<input id="nomeJogadorPopup" placeholder="Teu nome" style="margin-bottom: 10px;" type="text"/>
<button class="botao-amarelo" onclick="guardarPontuacaoPopup()">Guardar PontuaÃ§Ã£o</button>
</div>
</div>
<div class="popup hidden" id="popupVitoria">
<div class="popup-content">
<p style="font-weight: bold; font-size: 1.2rem;">ParabÃ©ns! Venceste! Queres continuar?</p>
<button class="botao-amarelo" id="btnSim">Sim</button>
<button class="botao-amarelo" id="btnNao">NÃ£o</button>
<div id="popupNovaCategoria" style="display: none; margin-top: 15px;">
<p>Escolhe uma categoria:</p>
<select id="popupCategoria" style="margin-bottom: 10px;">
<option value="">-- Escolher --</option>
<option value="Ditados Populares">Ditados Populares</option>
<option value="Gastronomia">Gastronomia</option>
<option value="Marcas">Marcas</option>
<option value="Celebridades">Celebridades</option>
<option value="Cinema">Cinema</option>
<option value="Animais">Animais</option>
<option value="ProfissÃµes">ProfissÃµes</option>
</select>
<br/>
<button class="botao-amarelo" id="btnComecarPopup">ComeÃ§ar</button>
</div>
</div>
</div>
<script>


function atualizarEmojisCategorias() {
  const obterNomeCategoria = (chave) => {
    const nomes = {
      ditados: "Ditados Populares",
      gastronomia: "Gastronomia",
      marcas: "Marcas",
      celebridades: "Celebridades",
      filmes: "Cinema",
      animais: "Animais",
      profissoes: "ProfissÃµes"
    };
    return nomes[chave] || chave;
  };

  const atualizar = (selectElement) => {
    for (let option of selectElement.options) {
      const valor = option.value;
      if (!valor || !categoriasDisponiveis[valor]) continue;
      const restantes = categoriasDisponiveis[valor].length;
      const nomeCompleto = obterNomeCategoria(valor);
      if (restantes >= 9) {
        option.textContent = nomeCompleto + " ðŸŸ¢";
      } else if (restantes >= 1) {
        option.textContent = nomeCompleto + " ðŸŸ ";
      } else {
        option.textContent = nomeCompleto + " ðŸ”´";
      }
    }
  };

  atualizar(document.getElementById("categoria"));
  const popupSelect = document.getElementById("popupCategoria");
  if (popupSelect) atualizar(popupSelect);
}

document.addEventListener("DOMContentLoaded", () => {
  atualizarEmojisCategorias();
  document.getElementById("categoria").addEventListener("click", atualizarEmojisCategorias);
});
</script></body>
</html>
